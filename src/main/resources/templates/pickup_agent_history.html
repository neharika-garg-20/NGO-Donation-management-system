<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pickup Agent History - Seva Setu</title>
    <link rel="stylesheet" href="../static/css/pickup_agent_history.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <!-- Logo/Site Name -->
                <div class="logo">
                    <a href="index.html" class="logo-link">Seva Setu</a>
                </div>
                
                <!-- Navigation Breadcrumb -->
                <div class="breadcrumb">
                    <a href="index.html" class="breadcrumb-link">Home</a>
                    <span class="breadcrumb-separator">></span>
                    <span class="breadcrumb-current">Pickup Agent History</span>
                </div>
                
                <!-- Agent Profile -->
                <div class="user-profile">
                    <div class="user-avatar">
                        <svg class="avatar-icon" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM8.9 6c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1v2H8.9V6zM16 16h-3v3h-2v-3H8v-2h3v-3h2v3h3v2z"/>
                        </svg>
                    </div>
                    <div class="user-info">
                        <span class="user-name">Rajesh Kumar</span>
                        <span class="user-role">Pickup Agent</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <!-- Page Header -->
            <div class="page-header">
                <h1 class="page-title">My Pickup History</h1>
                <p class="page-subtitle">Track your pickup assignments and donation collections</p>
            </div>

            <!-- Agent Stats -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon pickup-icon">
                            <svg fill="currentColor" viewBox="0 0 24 24">
                                <path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM8.9 6c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1v2H8.9V6zM16 16h-3v3h-2v-3H8v-2h3v-3h2v3h3v2z"/>
                            </svg>
                        </div>
                        <div class="stat-content">
                            <div class="stat-number">47</div>
                            <div class="stat-label">Total Pickups</div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon success-icon">
                            <svg fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                            </svg>
                        </div>
                        <div class="stat-content">
                            <div class="stat-number">96%</div>
                            <div class="stat-label">Success Rate</div>
                        </div>
                    </div>
                </div>
            

            <!-- Search and Filter -->
            <div class="filter-section">
                <div class="search-container">
                    <svg class="search-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                    </svg>
                    <input type="text" id="searchInput" class="search-input" placeholder="Search assignments, donors, NGOs, or addresses...">
                </div>
                
                <div class="filter-buttons">
                    <button class="filter-btn active" data-filter="all">All Assignments</button>
                    <button class="filter-btn" data-filter="completed">Completed</button>
                    <button class="filter-btn" data-filter="scheduled">Scheduled</button>
                    <button class="filter-btn" data-filter="in-progress">In Progress</button>
                </div>
            </div>

            <!-- Pickup History Table -->
            <div class="table-section">
                <div class="table-container">
                    <table class="history-table" id="historyTable">
                        <thead>
                            <tr>
                                <th class="sortable" data-column="assignment_id">
                                    Assignment ID
                                    <svg class="sort-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"></path>
                                    </svg>
                                </th>
                                <th class="sortable" data-column="donation_id">
                                    Donation ID
                                    <svg class="sort-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"></path>
                                    </svg>
                                </th>
                                <th class="sortable" data-column="pickup_date">
                                    Pickup Date
                                    <svg class="sort-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"></path>
                                    </svg>
                                </th>
                                <th>Address</th>
                                <th class="sortable" data-column="donor_name">
                                    Donor Name
                                    <svg class="sort-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"></path>
                                    </svg>
                                </th>
                                <th>NGO Name</th>
                                <th>Donation Type</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody id="tableBody">
                            <tr data-status="completed">
                                <td class="assignment-id">PA001</td>
                                <td class="donation-id">DON2024001</td>
                                <td>2024-01-15</td>
                                <td class="address">123 MG Road, Koramangala, Bangalore - 560034</td>
                                <td class="donor-name">Anita Sharma</td>
                                <td class="ngo-name">Hope Foundation</td>
                                <td class="donation-type">Books & Stationery</td>
                                <td><span class="status-badge completed">Completed</span></td>
                            </tr>
                            <tr data-status="completed">
                                <td class="assignment-id">PA002</td>
                                <td class="donation-id">DON2024002</td>
                                <td>2024-01-22</td>
                                <td class="address">45 Linking Road, Bandra West, Mumbai - 400050</td>
                                <td class="donor-name">Vikram Patel</td>
                                <td class="ngo-name">Care & Cure Medical Trust</td>
                                <td class="donation-type">Medical Supplies</td>
                                <td><span class="status-badge completed">Completed</span></td>
                            </tr>
                            <tr data-status="completed">
                                <td class="assignment-id">PA003</td>
                                <td class="donation-id">DON2024003</td>
                                <td>2024-02-05</td>
                                <td class="address">78 Sector 15, Gurgaon, Haryana - 122001</td>
                                <td class="donor-name">Meera Gupta</td>
                                <td class="ngo-name">Green Earth Initiative</td>
                                <td class="donation-type">Clothes & Blankets</td>
                                <td><span class="status-badge completed">Completed</span></td>
                            </tr>
                            <tr data-status="completed">
                                <td class="assignment-id">PA004</td>
                                <td class="donation-id">DON2024004</td>
                                <td>2024-02-18</td>
                                <td class="address">156 Anna Salai, T. Nagar, Chennai - 600017</td>
                                <td class="donor-name">Ravi Krishnan</td>
                                <td class="ngo-name">Hunger Relief Foundation</td>
                                <td class="donation-type">Food Grains</td>
                                <td><span class="status-badge completed">Completed</span></td>
                            </tr>
                            <tr data-status="completed">
                                <td class="assignment-id">PA005</td>
                                <td class="donation-id">DON2024005</td>
                                <td>2024-03-02</td>
                                <td class="address">89 Park Street, Kolkata, West Bengal - 700016</td>
                                <td class="donor-name">Priya Banerjee</td>
                                <td class="ngo-name">Tech for Good</td>
                                <td class="donation-type">Electronics</td>
                                <td><span class="status-badge completed">Completed</span></td>
                            </tr>
                            <tr data-status="in-progress">
                                <td class="assignment-id">PA006</td>
                                <td class="donation-id">DON2024006</td>
                                <td>2024-03-15</td>
                                <td class="address">234 Jubilee Hills, Hyderabad, Telangana - 500033</td>
                                <td class="donor-name">Suresh Reddy</td>
                                <td class="ngo-name">Women's Welfare Society</td>
                                <td class="donation-type">Furniture</td>
                                <td><span class="status-badge in-progress">In Progress</span></td>
                            </tr>
                            <tr data-status="completed">
                                <td class="assignment-id">PA007</td>
                                <td class="donation-id">DON2024007</td>
                                <td>2024-03-28</td>
                                <td class="address">67 Civil Lines, Jaipur, Rajasthan - 302006</td>
                                <td class="donor-name">Kavita Agarwal</td>
                                <td class="ngo-name">Water for All</td>
                                <td class="donation-type">Cash Donation</td>
                                <td><span class="status-badge completed">Completed</span></td>
                            </tr>
                            <tr data-status="scheduled">
                                <td class="assignment-id">PA008</td>
                                <td class="donation-id">DON2024008</td>
                                <td>2024-04-10</td>
                                <td class="address">145 Connaught Place, New Delhi - 110001</td>
                                <td class="donor-name">Amit Singh</td>
                                <td class="ngo-name">Senior Citizens Support</td>
                                <td class="donation-type">Medicines</td>
                                <td><span class="status-badge scheduled">Scheduled</span></td>
                            </tr>
                            <tr data-status="scheduled">
                                <td class="assignment-id">PA009</td>
                                <td class="donation-id">DON2024009</td>
                                <td>2024-04-15</td>
                                <td class="address">92 FC Road, Pune, Maharashtra - 411005</td>
                                <td class="donor-name">Deepika Joshi</td>
                                <td class="ngo-name">Hope Foundation</td>
                                <td class="donation-type">Toys & Games</td>
                                <td><span class="status-badge scheduled">Scheduled</span></td>
                            </tr>
                            <tr data-status="scheduled">
                                <td class="assignment-id">PA010</td>
                                <td class="donation-id">DON2024010</td>
                                <td>2024-04-20</td>
                                <td class="address">178 Brigade Road, Bangalore - 560025</td>
                                <td class="donor-name">Rohit Mehta</td>
                                <td class="ngo-name">Green Earth Initiative</td>
                                <td class="donation-type">Sports Equipment</td>
                                <td><span class="status-badge scheduled">Scheduled</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Performance Summary -->
            <div class="summary-section">
                <div class="summary-card">
                    <h3 class="summary-title">Pickup Agent Performance Summary</h3>
                    <div class="summary-content">
                        <p class="summary-text">
                            Excellent work, Rajesh! You have successfully completed <strong>47 pickup assignments</strong> 
                            with a remarkable <strong>96% success rate</strong>. 
                        </p>
                        <p class="summary-text">
                            Your pickup assignments have covered diverse donation types including medical supplies, 
                            educational materials, clothing, food grains, and electronics, making a significant 
                            impact in multiple communities.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3 class="footer-title">Seva Setu</h3>
                    <p class="footer-description">Connecting hearts, creating impact through efficient donation pickup services.</p>
                </div>
                <div class="footer-section">
                    <h3 class="footer-title">Quick Links</h3>
                    <ul class="footer-links">
                        <li><a href="index.html" class="footer-link">Home</a></li>
                        <li><a href="#" class="footer-link">Agent Dashboard</a></li>
                        <li><a href="#" class="footer-link">New Assignments</a></li>
                        <li><a href="#" class="footer-link">My Profile</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3 class="footer-title">Support</h3>
                    <ul class="footer-links">
                        <li><a href="#" class="footer-link">Help Center</a></li>
                        <li><a href="#" class="footer-link">Contact Support</a></li>
                        <li><a href="#" class="footer-link">Agent Guidelines</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 Seva Setu. All rights reserved.</p>
            </div>
        </div>
    </footer>

   

    <script>
        // Pickup Agent History Page JavaScript

        // Search functionality
        const searchInput = document.getElementById('searchInput');
        const tableBody = document.getElementById('tableBody');
        const filterButtons = document.querySelectorAll('.filter-btn');

        searchInput.addEventListener('input', function() {
            const searchTerm = this.value.toLowerCase();
            const rows = tableBody.querySelectorAll('tr');

            rows.forEach(row => {
                const text = row.textContent.toLowerCase();
                if (text.includes(searchTerm)) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });
        });

        // Filter functionality
        filterButtons.forEach(button => {
            button.addEventListener('click', function() {
                // Remove active class from all buttons
                filterButtons.forEach(btn => btn.classList.remove('active'));
                // Add active class to clicked button
                this.classList.add('active');

                const filter = this.getAttribute('data-filter');
                const rows = tableBody.querySelectorAll('tr');

                rows.forEach(row => {
                    const status = row.getAttribute('data-status');
                    if (filter === 'all' || status === filter) {
                        row.style.display = '';
                    } else {
                        row.style.display = 'none';
                    }
                });
            });
        });

        // Sorting functionality
        const sortableHeaders = document.querySelectorAll('.sortable');
        let currentSort = { column: null, direction: 'asc' };

        sortableHeaders.forEach(header => {
            header.addEventListener('click', function() {
                const column = this.getAttribute('data-column');
                const rows = Array.from(tableBody.querySelectorAll('tr'));

                // Determine sort direction
                if (currentSort.column === column) {
                    currentSort.direction = currentSort.direction === 'asc' ? 'desc' : 'asc';
                } else {
                    currentSort.direction = 'asc';
                }
                currentSort.column = column;

                // Sort rows
                rows.sort((a, b) => {
                    let aValue, bValue;

                    switch (column) {
                        case 'assignment_id':
                            aValue = a.querySelector('.assignment-id').textContent;
                            bValue = b.querySelector('.assignment-id').textContent;
                            break;
                        case 'donation_id':
                            aValue = a.querySelector('.donation-id').textContent;
                            bValue = b.querySelector('.donation-id').textContent;
                            break;
                        case 'pickup_date':
                            aValue = new Date(a.cells[2].textContent);
                            bValue = new Date(b.cells[2].textContent);
                            break;
                        case 'donor_name':
                            aValue = a.querySelector('.donor-name').textContent;
                            bValue = b.querySelector('.donor-name').textContent;
                            break;
                        default:
                            aValue = a.textContent;
                            bValue = b.textContent;
                    }

                    if (aValue < bValue) return currentSort.direction === 'asc' ? -1 : 1;
                    if (aValue > bValue) return currentSort.direction === 'asc' ? 1 : -1;
                    return 0;
                });

                // Clear table body and append sorted rows
                tableBody.innerHTML = '';
                rows.forEach(row => tableBody.appendChild(row));

                // Update sort icons
                sortableHeaders.forEach(h => {
                    const icon = h.querySelector('.sort-icon');
                    icon.style.opacity = h === this ? '1' : '0.5';
                });
            });
        });

        // Add click handlers for interactive elements
        document.addEventListener('DOMContentLoaded', function() {
            // Add hover effects to table rows
            const tableRows = document.querySelectorAll('.history-table tbody tr');
            tableRows.forEach(row => {
                row.addEventListener('click', function() {
                    const assignmentId = this.querySelector('.assignment-id').textContent;
                    const donationId = this.querySelector('.donation-id').textContent;
                    // In a real application, this would show assignment details
                    alert(`Assignment Details:\nAssignment ID: ${assignmentId}\nDonation ID: ${donationId}\n\nClick OK to view full details.`);
                });
            });

            // Add status badge interactions
            const statusBadges = document.querySelectorAll('.status-badge');
            statusBadges.forEach(badge => {
                badge.addEventListener('mouseenter', function() {
                    // Could show additional status information
                    this.style.transform = 'scale(1.05)';
                });
                
                badge.addEventListener('mouseleave', function() {
                    this.style.transform = 'scale(1)';
                });
            });

            // Add address truncation for mobile
            function truncateAddresses() {
                const addresses = document.querySelectorAll('.address');
                addresses.forEach(addr => {
                    if (window.innerWidth < 768 && addr.textContent.length > 50) {
                        addr.title = addr.textContent; // Show full address on hover
                        addr.textContent = addr.textContent.substring(0, 47) + '...';
                    }
                });
            }

            truncateAddresses();
            window.addEventListener('resize', truncateAddresses);
        });

        // Add notification for upcoming pickups
        function checkUpcomingPickups() {
            const today = new Date();
            const tomorrow = new Date(today);
            tomorrow.setDate(tomorrow.getDate() + 1);
            
            const scheduledRows = document.querySelectorAll('tr[data-status="scheduled"]');
            let upcomingCount = 0;
            
            scheduledRows.forEach(row => {
                const pickupDate = new Date(row.cells[2].textContent);
                if (pickupDate <= tomorrow) {
                    upcomingCount++;
                }
            });
            
            if (upcomingCount > 0) {
                // Could show a notification banner
                console.log(`You have ${upcomingCount} pickup(s) scheduled for today or tomorrow!`);
            }
        }

        // Check for upcoming pickups on page load
        document.addEventListener('DOMContentLoaded', checkUpcomingPickups);
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97f5d374369498f2',t:'MTc1NzkxNTIxMS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
