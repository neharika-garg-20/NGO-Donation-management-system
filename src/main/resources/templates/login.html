<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - Food Donation Platform</title>
</head>
<link rel="stylesheet" href="/css/login.css">
<body>
    <div class="login-container">
        <!-- Login Card -->
        <div class="login-card">
            <!-- Header -->
            <div class="header">
                <div class="logo">‚úì</div>
                <h1>Welcome Back</h1>
                <p>Sign in to your account</p>
            </div>

            <!-- Login Form -->
            <form th:action="@{/login}" method="post">
    <!-- Hidden input to send role -->
    <input type="hidden" name="userType" id="roleInput" />

    <!-- User Type Dropdown -->
    <div class="form-group">
        <label class="form-label">Login as</label>
        <div class="dropdown-container">
            <button type="button" class="dropdown-button" onclick="toggleDropdown()">
                <span id="selectedUserType">Select user type</span>
                <svg class="dropdown-icon" id="dropdownIcon" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"/>
                </svg>
            </button>
            
            <!-- Dropdown Menu -->
            <div class="dropdown-menu" id="dropdownMenu">
                <button type="button" class="dropdown-item" onclick="selectUserType('donor')">ü§ù Donor</button>
                <button type="button" class="dropdown-item" onclick="selectUserType('pickup_agent')">üöö Pickup Agent</button>
                <button type="button" class="dropdown-item" onclick="selectUserType('ngo')">üè¢ NGO</button>
                <button type="button" class="dropdown-item" onclick="selectUserType('volunteer')">‚ù§Ô∏è Volunteer</button>
            </div>
        </div>
    </div>

    <!-- Email Input -->
    <div class="form-group">
        <label for="email" class="form-label">Email Address</label>
        <input type="email" id="email" name="email" required class="form-input" placeholder="Enter your email">
    </div>

    <!-- Password Input -->
    <div class="form-group">
        <label for="password" class="form-label">Password</label>
        <div class="password-container">
            <input type="password" id="password" name="password" required class="form-input" placeholder="Enter your password">
            <button type="button" class="password-toggle" onclick="togglePassword()">
                <svg id="eyeIcon" width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M10 12a2 2 0 100-4 2 2 0 000 4z"/>
                    <path fill-rule="evenodd" d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z" clip-rule="evenodd"/>
                </svg>
            </button>
        </div>
    </div>

    <!-- Login Button -->
    <button type="submit" class="login-button">Sign In</button>
</form>

<script>
    let selectedType = '';

    function toggleDropdown() {
        const menu = document.getElementById('dropdownMenu');
        const icon = document.getElementById('dropdownIcon');
        menu.classList.toggle('show');
        icon.classList.toggle('rotated');
    }

    function selectUserType(type) {
        selectedType = type;
        document.getElementById('selectedUserType').textContent = type;
        document.getElementById('roleInput').value = type; // <-- This sets the hidden input
        document.getElementById('dropdownMenu').classList.remove('show');
        document.getElementById('dropdownIcon').classList.remove('rotated');
    }

    function togglePassword() {
        const passwordInput = document.getElementById('password');
        passwordInput.type = passwordInput.type === 'password' ? 'text' : 'password';
    }

    document.addEventListener('click', function(event) {
        const dropdown = document.getElementById('dropdownMenu');
        const button = document.querySelector('.dropdown-button');
        if (!button.contains(event.target) && !dropdown.contains(event.target)) {
            dropdown.classList.remove('show');
            document.getElementById('dropdownIcon').classList.remove('rotated');
        }
    });
</script>

<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97eddead250c54bc',t:'MTc1NzgzMTc4NC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
