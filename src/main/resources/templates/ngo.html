<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Community Donation Directory</title>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">

</head>
<link rel="stylesheet" href="/css/ngo.css">

<body>
  <!-- Header -->
  <header class="header-gradient">
    <div class="container header">
      <div class="top-row">
        <div>
          <div class="chip chip-pad soft-shadow" aria-label="Directory badge">
            <span aria-hidden="true">ü§ù</span>
            <span>Community Donation Directory</span>
          </div>
          <h1 style="margin:16px 0 8px; font-size:clamp(28px, 3vw, 40px); font-weight:800; letter-spacing:-0.02em; color:var(--dark-brown)">
            Give where it matters most
          </h1>
          <p style="margin:0; font-size:clamp(16px, 2vw, 18px); color:#6B4F3A">
            Discover local NGOs, see what they accept, and lend a hand today.
          </p>
        </div>
        <!-- Emblem -->
        <div class="emblem card-gradient soft-shadow" aria-hidden="true">
          <svg width="48" height="48" viewBox="0 0 24 24" fill="none">
            <defs>
              <linearGradient id="em" x1="0" y1="0" x2="24" y2="24">
                <stop stop-color="#D9A75C"/>
                <stop offset="1" stop-color="#8B5E3C"/>
              </linearGradient>
            </defs>
            <path d="M12 21s-7-4.35-9.5-8.5C.94 9.06 2.36 5.5 5.5 5.5c1.93 0 3.04 1.23 3.84 2.36.21.29.42.6.66.94.24-.34.45-.65.66-.94C11.46 6.73 12.57 5.5 14.5 5.5c3.14 0 4.56 3.56 3 7C19 16.65 12 21 12 21z" fill="url(#em)"/>
          </svg>
        </div>
      </div>

      <!-- Controls -->
      <div class="controls">
        <!-- Search -->
        <div class="control-wrap soft-shadow hover-lift">
          <label for="search" class="sr-only" style="position:absolute; left:-9999px">Search NGOs</label>
          <div class="search-field">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path d="M21 21l-3.9-3.9M10.5 18a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15z" stroke="#8B5E3C" stroke-width="1.6" stroke-linecap="round"/>
            </svg>
            <input id="search" type="text" placeholder="Search by name, city, or item..." class="search-input focus-ring" />
          </div>
        </div>

        <!-- Filters row -->
        <div class="filters-row">
          <!-- City -->
          <div class="control-wrap soft-shadow hover-lift">
            <label for="city" class="select-label">City</label>
            <div class="select-holder">
              <span class="select-icon" aria-hidden="true">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M12 2C8 2 5 5 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-4-3-7-7-7z" stroke="#8B5E3C" stroke-width="1.3" fill="rgba(139,94,60,0.12)"/></svg>
              </span>
              <select id="city" class="select focus-ring">
                <option value="all">All cities</option>
              </select>
              <span class="select-caret" aria-hidden="true">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none"><path d="M6 9l6 6 6-6" stroke="#8B5E3C" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>
              </span>
            </div>
          </div>

          <!-- Item Type -->
          <div class="control-wrap soft-shadow hover-lift">
            <label for="item" class="select-label">Item type</label>
            <div class="select-holder">
              <span class="select-icon" aria-hidden="true">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M4 7h16M6 11h12M8 15h8" stroke="#8B5E3C" stroke-width="1.6" stroke-linecap="round"/></svg>
              </span>
              <select id="item" class="select focus-ring">
                <option value="all">All items</option>
              </select>
              <span class="select-caret" aria-hidden="true">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none"><path d="M6 9l6 6 6-6" stroke="#8B5E3C" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>
              </span>
            </div>
          </div>
        </div>
      </div>

      <!-- Active chips + result count -->
      <div class="chips-row">
        <div id="activeChips" style="display:flex; flex-wrap:wrap; gap:8px;"></div>
        <div class="chips-right">
          <span id="resultCount" class="badge soft-shadow">0 results</span>
          <button id="clearAll" class="chip chip-pad hover-lift focus-ring" style="display:none">Clear filters</button>
        </div>
      </div>
    </div>
  </header>

  <main class="container" style="padding:32px 0 48px;">
    <div class="divider"></div>

    <!-- Grid -->
    <section id="grid" class="cards"></section>

    <!-- Empty state -->
    <div id="emptyState" class="card-gradient empty soft-shadow-lg" style="display:none;">
      <div class="avatar-ring" style="margin:0 auto;">
        <svg width="34" height="34" viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M12 21s-7-4.35-9.5-8.5C.94 9.06 2.36 5.5 5.5 5.5c1.93 0 3.04 1.23 3.84 2.36.21.29.42.6.66.94.24-.34.45-.65.66-.94C11.46 6.73 12.57 5.5 14.5 5.5c3.14 0 4.56 3.56 3 7C19 16.65 12 21 12 21z" fill="url(#g2)"/>
          <defs><linearGradient id="g2" x1="0" y1="0" x2="24" y2="24"><stop stop-color="#D9A75C"/><stop offset="1" stop-color="#8B5E3C"/></linearGradient></defs>
        </svg>
      </div>
      <h3 style="margin:20px 0 4px; font-size:24px; font-weight:800; color:var(--dark-brown)">No matches yet</h3>
      <p style="margin:0; color:#6B4F3A">Try a different item or clear your filters to explore more NGOs.</p>
      <button id="resetFilters" class="btn btn-gold soft-shadow hover-lift focus-ring" style="margin-top:20px;">Reset filters</button>
    </div>
  </main>

  <!-- Donate Modal -->
  <div id="modal" class="modal">
    <div class="modal-backdrop"></div>
    <div class="modal-card glass soft-shadow-lg">
      <div style="display:flex; align-items:flex-start; justify-content:space-between; gap:16px;">
        <div style="display:flex; align-items:center; gap:12px;">
          <div class="avatar-ring" aria-hidden="true">
            <span style="font-size:20px;">üéÅ</span>
          </div>
          <div>
            <h4 id="modalTitle" style="margin:0; font-size:clamp(20px, 2.2vw, 24px); font-weight:800; color:var(--dark-brown)">Donate</h4>
            <p id="modalSubtitle" style="margin:4px 0 0; font-size:14px; color:#6B4F3A"></p>
          </div>
        </div>
        <button id="modalClose" class="chip hover-lift focus-ring" style="border-radius:12px; padding:8px;" aria-label="Close donate dialog">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M6 6l12 12M18 6L6 18" stroke="#5A3E2B" stroke-linecap="round" stroke-width="1.8"/></svg>
        </button>
      </div>

      <div style="margin-top:16px; font-size:15px; color:#5A3E2B">
        <div class="badge" style="padding:6px 10px; display:inline-flex; align-items:center; gap:8px; font-size:13px;">
          <span aria-hidden="true">‚ÑπÔ∏è</span>
          <span>This is a demo ‚Äî no payments are processed here.</span>
        </div>

        <div style="margin-top:16px; padding:16px; border-radius:12px; background:rgba(241,228,211,0.6); border:1px solid rgba(139,94,60,0.25)">
          <p style="margin:0 0 8px; font-weight:700;">How to help</p>
          <ul style="margin:0; padding-left:18px;">
            <li>Contact the NGO to arrange drop-off or pick-up.</li>
            <li>Confirm the items they currently accept.</li>
            <li>Share this listing with friends and neighbors.</li>
          </ul>
        </div>

        <div style="margin-top:16px; display:grid; grid-template-columns:1fr; gap:12px;">
          <a id="visitSiteBtn" href="#" target="_blank" rel="noopener" class="chip hover-lift focus-ring" style="text-align:center; font-weight:700; padding:12px 16px; border-radius:12px; text-decoration:none; color:inherit;">Visit website</a>
          <button id="copyEmailBtn" class="btn btn-gold soft-shadow hover-lift focus-ring" style="width:100%;">Copy contact email</button>
        </div>

        <div id="modalAccepted" style="margin-top:12px; font-size:14px; color:#6B4F3A"></div>
      </div>
    </div>
  </div>

  <footer>
    Built with care for communities. Be kind, give thoughtfully.
  </footer>

  <script>
    // Sample NGO data
    const ngos = [
      { id: 1, name: "Harvest Hearts Food Bank", city: "Nairobi", items: ["Food", "Hygiene"], email: "contact@harvesthearts.org", website: "https://example.org/harvesthearts" },
      { id: 2, name: "Little Steps Kids Support", city: "Lagos", items: ["Toys", "Books", "Clothes"], email: "hello@littlesteps.ng" },
      { id: 3, name: "Green Roots Shelter", city: "Cape Town", items: ["Clothes", "Bedding", "Food"], email: "support@greenroots.za" },
      { id: 4, name: "Bright Futures Education Aid", city: "Accra", items: ["Books", "Stationery", "Electronics"], email: "team@brightfutures.edu" },
      { id: 5, name: "Warm Hands Refuge Center", city: "Johannesburg", items: ["Bedding", "Clothes", "Hygiene"], email: "care@warmhands.org" },
      { id: 6, name: "Sunrise Animal Rescue", city: "Nairobi", items: ["Pet Food", "Toys", "Cleaning"], email: "info@sunrisepets.ke", website: "https://example.org/sunrisepets" },
    ];

    // Elements
    const grid = document.getElementById('grid');
    const searchInput = document.getElementById('search');
    const citySelect = document.getElementById('city');
    const itemSelect = document.getElementById('item');
    const resultCount = document.getElementById('resultCount');
    const emptyState = document.getElementById('emptyState');
    const resetFiltersBtn = document.getElementById('resetFilters');
    const clearAll = document.getElementById('clearAll');
    const activeChips = document.getElementById('activeChips');

    // Modal
    const modal = document.getElementById('modal');
    const modalTitle = document.getElementById('modalTitle');
    const modalSubtitle = document.getElementById('modalSubtitle');
    const modalAccepted = document.getElementById('modalAccepted');
    const visitSiteBtn = document.getElementById('visitSiteBtn');
    const copyEmailBtn = document.getElementById('copyEmailBtn');
    const modalClose = document.getElementById('modalClose');

    // Build dynamic options
    function initFilters(){
      const cities = Array.from(new Set(ngos.map(n => n.city))).sort();
      const items = Array.from(new Set(ngos.flatMap(n => n.items))).sort();
      for(const c of cities){
        const opt = document.createElement('option'); opt.value=c; opt.textContent=c; citySelect.appendChild(opt);
      }
      for(const it of items){
        const opt = document.createElement('option'); opt.value=it; opt.textContent=it; itemSelect.appendChild(opt);
      }
    }

    // State
    const state = { search:'', city:'all', item:'all' };

    function matchesFilters(n){
      const s = state.search.trim().toLowerCase();
      const searchOk = !s || [n.name, n.city, ...(n.items||[])].join(' ').toLowerCase().includes(s);
      const cityOk = state.city === 'all' || n.city === state.city;
      const itemOk = state.item === 'all' || (n.items||[]).includes(state.item);
      return searchOk && cityOk && itemOk;
    }

    function updateChips(){
      activeChips.innerHTML = '';
      let any=false;
      if(state.search){
        any=true; activeChips.appendChild(chipEl(`Search: "${state.search}"`, ()=>{ state.search=''; searchInput.value=''; render(); }));
      }
      if(state.city!=='all'){
        any=true; activeChips.appendChild(chipEl(`City: ${state.city}`, ()=>{ state.city='all'; citySelect.value='all'; render(); }));
      }
      if(state.item!=='all'){
        any=true; activeChips.appendChild(chipEl(`Item: ${state.item}`, ()=>{ state.item='all'; itemSelect.value='all'; render(); }));
      }
      clearAll.style.display = any ? 'inline-flex' : 'none';
    }

    function chipEl(text, onClear){
      const el=document.createElement('div');
      el.className='chip chip-pad hover-lift';
      const span=document.createElement('span'); span.textContent=text; el.appendChild(span);
      const btn=document.createElement('button');
      btn.className='focus-ring'; btn.setAttribute('aria-label','Remove filter');
      btn.style.cssText='border:none;background:transparent;padding:6px;border-radius:999px;cursor:pointer';
      btn.innerHTML='<svg width="16" height="16" viewBox="0 0 24 24" fill="none"><path d="M6 6l12 12M18 6L6 18" stroke="#5A3E2B" stroke-linecap="round" stroke-width="1.8"/></svg>';
      btn.addEventListener('click', onClear);
      el.appendChild(btn);
      return el;
    }

    function avatarSVG(name){
      const initials = name.split(' ').map(w=>w[0]).slice(0,2).join('').toUpperCase();
      const id = 'a-'+name.replace(/\W/g,'');
      return `
      <svg width="56" height="56" viewBox="0 0 56 56" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <defs>
          <radialGradient id="${id}" cx="20%" cy="15%" r="80%">
            <stop offset="0%" stop-color="#D9A75C"/>
            <stop offset="100%" stop-color="#CDAF91"/>
          </radialGradient>
        </defs>
        <circle cx="28" cy="28" r="26" fill="url(#${id})" />
        <circle cx="28" cy="28" r="26" fill="rgba(255,255,255,.15)"/>
        <text x="50%" y="54%" text-anchor="middle" font-family="Nunito, sans-serif" font-weight="800" font-size="18" fill="#5A3E2B">${initials}</text>
      </svg>`;
    }

    function cardFor(n){
      const card = document.createElement('article');
      card.className = 'card card-gradient soft-shadow hover-lift';
      card.innerHTML = `
        <div>
          <div style="display:flex; align-items:flex-start; justify-content:space-between; gap:12px;">
            <div style="display:flex; align-items:center; gap:12px;">
              <div class="avatar-ring">${avatarSVG(n.name)}</div>
              <div>
                <h3 style="margin:0; font-size:clamp(18px, 2vw, 20px); font-weight:800; color:var(--dark-brown)">${n.name}</h3>
                <div class="badge" style="margin-top:6px;">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M12 2C8 2 5 5 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-4-3-7-7-7z" stroke="#8B5E3C" stroke-width="1.3" fill="rgba(139,94,60,0.12)"/></svg>
                  <span>${n.city}</span>
                </div>
              </div>
            </div>
          </div>
          <div style="margin-top:12px; display:flex; flex-wrap:wrap; gap:8px;">
            ${(n.items||[]).map(it => `<span class="tag soft-shadow">${it}</span>`).join('')}
          </div>
        </div>
        <div style="margin-top:16px; display:grid; grid-template-columns:1fr 1fr; gap:10px;">
          <button data-id="${n.id}" class="btn btn-gold soft-shadow hover-lift focus-ring donateBtn">Donate</button>
          <a href="mailto:${n.email}" class="btn btn-brown soft-shadow hover-lift focus-ring" style="text-align:center; text-decoration:none;">Contact</a>
        </div>
      `;
      return card;
    }

    function render(){
      const filtered = ngos.filter(matchesFilters);
      resultCount.textContent = filtered.length + (filtered.length === 1 ? ' result' : ' results');

      grid.innerHTML = '';
      if(filtered.length === 0){
        emptyState.style.display = '';
      } else {
        emptyState.style.display = 'none';
        for(const n of filtered){ grid.appendChild(cardFor(n)); }
      }
      updateChips();
    }

    function openModal(n){
      modalTitle.textContent = `Donate to ${n.name}`;
      modalSubtitle.textContent = `${n.city} ‚Ä¢ Contact: ${n.email}`;
      modalAccepted.innerHTML = `<span style="font-weight:700">Currently accepts:</span> ${(n.items||[]).map(i=>`<span class="tag" style="display:inline-block; margin:4px 6px 0 0;">${i}</span>`).join(' ')}`;
      if(n.website){
        visitSiteBtn.href = n.website;
        visitSiteBtn.style.pointerEvents = 'auto';
        visitSiteBtn.style.opacity = '1';
      } else {
        visitSiteBtn.href = '#';
        visitSiteBtn.style.pointerEvents = 'none';
        visitSiteBtn.style.opacity = '.6';
      }
      copyEmailBtn.onclick = async () => {
        try{
          await navigator.clipboard.writeText(n.email);
          copyEmailBtn.textContent = 'Email copied!';
          setTimeout(()=> copyEmailBtn.textContent = 'Copy contact email', 1400);
        }catch(e){
          window.location.href = 'mailto:'+n.email;
        }
      };
      modal.classList.add('show');
    }

    function closeModal(){
      modal.classList.remove('show');
    }

    function wire(){
      // Debounced search
      let t;
      searchInput.addEventListener('input', (e)=>{
        clearTimeout(t);
        t = setTimeout(()=>{ state.search = e.target.value; render(); }, 180);
      });
      citySelect.addEventListener('change', (e)=>{ state.city = e.target.value; render(); });
      itemSelect.addEventListener('change', (e)=>{ state.item = e.target.value; render(); });
      resetFiltersBtn.addEventListener('click', ()=> resetAll());
      clearAll.addEventListener('click', ()=> resetAll());

      grid.addEventListener('click', (e)=>{
        const btn = e.target.closest('.donateBtn');
        if(!btn) return;
        const id = Number(btn.getAttribute('data-id'));
        const ngo = ngos.find(x=>x.id===id);
        if(ngo) openModal(ngo);
      });

      modalClose.addEventListener('click', closeModal);
      modal.addEventListener('click', (e)=>{ if(e.target === modal) closeModal(); });
      document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closeModal(); });
    }

    function resetAll(){
      state.search=''; state.city='all'; state.item='all';
      searchInput.value=''; citySelect.value='all'; itemSelect.value='all'; render();
    }

    // Init
    initFilters();
    wire();
    render();
  </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97ede016356390d6',t:'MTc1NzgzMTg0Mi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
